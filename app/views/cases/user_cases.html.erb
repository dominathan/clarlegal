<% provide(:title, 'All Cases') %>
<h1><%= "#{User.full_name(@user)}'s Cases" %></h1>

  <% @search_path = user_cases_path %>
  <%= render 'shared/search_bar' %>

<table class="table table-hover">
  <thead>
    <tr>
      <th>Case Name<br>
        (click to view)</th>
      <th>Practice Group</th>
      <th>Client Name</th>
      <th>Date Filed</th>
    </tr>
  </thead>
  <tbody>
    <% if @case %> <!-- does the client have cases?  If show then show them-->
      <% @case.each do |one_case| %>
       <tr>
        <td><%= link_to "#{one_case.name}", client_case_path(:client_id => one_case.client_id, :id => one_case.id) %></td>
        <td><%= one_case.practice_group %> </td>
        <td><%= User.full_name_last_first(one_case.client) %> </td>
        <td><%= one_case.timing.order(:created_at).last.case_filed ? one_case.timing.order(:created_at).last.case_filed : "" %></td>
      <% end %>
    <% else %>

    <% end %>
  </tbody>
</table>

<div class="center">
    <%= link_to "Add Open Case", new_case_path, class: 'btn btn-md btn-primary' %>
    <%= link_to "Add Closed Case", new_closed_case_path, class: 'btn btn-md btn-primary' %>
</div>


<%= will_paginate @case, renderer: BootstrapPagination::Rails %>
