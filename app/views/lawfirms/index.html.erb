<% provide(:title, 'Firm Clients') %>

<h2><%= "Clients of #{@firm_name}" %></h2>


<table id="lawfirmClients" class="display">
  <thead>
    <tr>
      <th>Name</th>
      <th>Email</th>
      <th>Phone Number</th>
      <th>Address</th>
    </tr>
  </thead>
  <tbody>
      <% @lawfirm_clients.each do |client| %>

      <!-- Use Client.company first, otherwise use client.full_name -->
        <% if client.company %>
          <% client.company.blank? ? name = client.full_name_last_first : name = client.company %>
        <% else %>
          <% client.company == nil ? name = client.full_name_last_first : name = "Need a name" %>
        <% end %>
      <!-- End name set -->

        <tr>
          <td><%= link_to name, client_path(client) %></td>
          <td><%= client.email %></td>
          <td><%= client.phone_number %></td>
          <td><%= client.street_address %><br>
              <%= client.city%>, <%=client.state%>, <%=client.zip_code %>
          </td>
        </tr>
      <% end %>
  </tbody>
</table>

  <div class="center">
   <%= link_to 'Add a Client', new_client_path, class: 'btn btn-md btn-primary' %>
  </div>



