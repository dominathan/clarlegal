<% provide(:title, 'Firm Clients') %>

<h1><%= "Clients of #{@firm_name}" %></h1>
  <% @search_path = user_lawfirms_path(current_user.id) %>
  <%= render 'shared/search_bar' %>
<table class="table table-hover sortable">
  <thead>
    <tr>
      <th>Name</th>
      <th>Email</th>
      <th>Phone Number</th>
      <th>Address</th>
    </tr>
  </thead>
  <tbody>
    <% if current_user.lawfirm.clients.present? %>
      <% @lawfirm_clients.each do |client| %>
        <tr>
          <td><%= link_to "#{User.full_name_last_first(client)}", client_path(client) %></td>
          <td><%= client.email %></td>
          <td><%= client.phone_number %></td>
          <td><%= client.street_address %><br>
              <%= client.city%>, <%=client.state%>, <%=client.zip_code %>
          </td>
        </tr>
      <% end %>
      <% else %>
       <tr>
         <td>You Must <%= link_to 'Add a Client', new_client_path %></td>
       </tr>
    <% end %>
  </tbody>
</table>

<%= will_paginate @lawfirm_clients, renderer: BootstrapPagination::Rails %>

