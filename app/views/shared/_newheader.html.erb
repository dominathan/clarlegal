<header class="navbar navbar-inverse navbar-fixed-top bs-docs-nav" role="banner">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a id="logo" href="/" class="navbar-brand">CLARLEGAL</a>
    </div>
    <nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
      <ul class="nav navbar-nav pull-right">
          <li><%= link_to "Home", root_path %></li>
      <% if signed_in? %>

        <% if current_user.lawfirm_id != nil %>

          <li>
            <%= link_to "Charts", revenue_by_year_expected_path %>
          </li>

          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">My Firm <b class='caret'></b>
            <ul class="dropdown-menu">
              <li>
                <%= link_to "Clients", user_lawfirms_path(:user_id => current_user.id, :lawfirm_id => current_user.lawfirm.id) %>
              </li>
              <li>
                <%= link_to "Cases", lawfirm_cases_path %>
              </li>
              <li>
                <%= link_to "Staff", user_lawfirm_staffings_path(:user_id => current_user.id, :lawfirm_id => current_user.lawfirm.id) %>
              </li>
              <li>
                <%= link_to "Practice Groups", user_lawfirm_practicegroups_path(:user_id =>current_user.id,:lawfirm_id => current_user.lawfirm.id) %>
              </li>
              <li>
                <%= link_to "Matter References", user_lawfirm_case_types_path(:user_id =>current_user.id,:lawfirm_id => current_user.lawfirm.id) %>
              </li>
            </ul>
          </li>
        <% else %>
          <li><%= link_to "Join Firm", new_user_lawfirm_path(current_user.id) %></li>
        <% end %>

          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">My Clients <b class='caret'></b>
            <ul class="dropdown-menu">
              <li><%= link_to "All Clients", clients_path %></li>
              <li><%= link_to "New Client", new_client_path %></li>
            </ul>
          </li>

          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">My Cases <b class='caret'></b>
            <ul class="dropdown-menu">
              <li><%= link_to "All Cases", user_cases_path %></li>
              <li><%= link_to "New Case", new_case_path %></li>
            </ul>
          </li>

          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">My Account<b class='caret'></b>
            <ul class="dropdown-menu">
              <li><%= link_to "Profile", current_user %></li>
              <li><%= link_to "Settings", edit_user_path(current_user) %></li>
              <li class="divider"></li>
              <li>
                <%= link_to "Sign out", signout_path, method: "delete" %>
              </li>
            </ul>
          </li>
        <% else %>
          <li><%= link_to "Sign in", signin_path %></li>
        <% end %>
      </ul>
    </nav>
  </div>
</header>

<script type="text/javascript">
   $('ul.nav li.dropdown').hover(function() {
      $(this).find('.dropdown-menu').stop(true, true).delay(150).fadeIn();
   }, function() {
      $(this).find('.dropdown-menu').stop(true, true).delay(150).fadeOut();
   });
</script>
