<% provide(:title, "Revenue By Month") %>

<div class="chart container">
  <div class="col-lg-10 col-lg-offset-2">
    <div id="revenueYear4Slow" style="min-width: 310px; height: 400px; margin: 0 auto"></div>
    <br>
    <div class='center'>
      <%= link_to "Back", revenue_by_year_slow_path, class: "btn btn-large btn-small btn-primary" %>
    </div>
  </div>
</div>

<script type="text/javascript">

 $(function () {

var categoryByMonths = <%= raw @category_months %>;
var revByMonthHigh = <%= @year_4_by_month_high %>;
var revByMonthMedium = <%= @year_4_by_month_medium %>;
var revByMonthLow = <%= @year_4_by_month_low %>;
var estimatedOverhead = <%= @overhead_by_month %>;


  // Create the chart
  $('#revenueYear4Slow').highcharts({
      title: {
          text: 'Gross Fee <%= @category_years[3]%>'
      },
      subtitle: {
          text: 'Slow Recovery Rate'
      },
      credits: {
        enabled: false
      },
      xAxis: {
        categories: categoryByMonths,
      },
      yAxis: {
          title: {
              text: 'Revenue'
          }
      },
      legend: {
          enabled: true
      },
      tooltip: {
          headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
          pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
              '<td style="padding:0"><b>${point.y}</b></td></tr>',
          footerFormat: '</table>',
          shared: true,
          useHTML: true
      },
      plotOptions: {
          column: {
              pointPadding: 0.2,
              borderWidth: 0
          }
      },
      series: [{
          type: "column",
          name: 'Low Net Fee',
          data: revByMonthLow,
      },
      {
          type: "column",
          name: 'Medium Net Fee',
          data: revByMonthMedium
      },
      {
          type: "column",
          name: 'High Net Fee',
          data: revByMonthHigh
      },{
          type: "spline",
          name: "Estimated Overhead",
          data: estimatedOverhead
      }],
  })
});

</script>
